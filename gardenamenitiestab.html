<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Garden Amenities</title>

<script src="site_libs/header-attrs-2.28/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/lumen.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="florafaunatab.html">Flora and Fauna</a>
</li>
<li>
  <a href="gardenamenitiestab.html">Garden Amenities</a>
</li>
<li>
  <a href="ecofriendlytab.html">Eco-Friendly Practices</a>
</li>
<li>
  <a href="learnmoretab.html">Learn More</a>
</li>
<li>
  <a href="mailto:&lt;kd2942@cumc.columbia.edu&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="http://github.com/&lt;nycgardens.github.io&gt;/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Garden Amenities</h1>

</div>


<p><img src="amenitypic3.jpg" style="width:80%"></p>
<p>A visit to a NYC garden means you may get to experience food, open
lawns, murals, farmer’s markets, or ponds, among other things. How
exciting! Before we take a deeper dive, let’s take a look at which
boroughs have the greatest numbers of garden amenities.</p>
<pre class="r"><code>library(readr)
library(tidyverse)
library(dplyr)
library(ggplot2)
library(stringr)
library(httr)
library(plotly)
library(nnet)
options(scipen = 999)  # Turn off scientific notation globally
gardeninfo = read_csv(&quot;./GreenThumb_Garden_Info.csv&quot;) %&gt;% janitor::clean_names()
gardenamenities = read_csv(&quot;./GreenThumb_Site_Visits.csv&quot;) %&gt;% janitor::clean_names()

info_tidy = gardeninfo %&gt;% select(borough, gardenname, parksid, status, juris) %&gt;% 
  mutate(borough = recode(borough,
                          &quot;B&quot; = &quot;Brooklyn&quot;,
                          &quot;X&quot; = &quot;Bronx&quot;,
                          &quot;M&quot; = &quot;Manhattan&quot;,
                          &quot;Q&quot; = &quot;Queens&quot;,
                          &quot;R&quot; = &quot;Staten Island&quot;))
amenities_tidy = gardenamenities %&gt;% select(parks_id, open_lawn_or_communal_area, murals, farmers_market, pond, food, inspection_id) %&gt;% rename(parksid = parks_id)

#merging data
garden_merged = full_join(amenities_tidy, info_tidy, by= &quot;parksid&quot;, relationship = &quot;many-to-many&quot;) 

#removing duplicates
#info_tidy %&gt;% select(parksid) %&gt;% duplicated()
#amenities_tidy %&gt;% select(parksid) %&gt;% unique()
#garden_merged[duplicated(garden_merged) | duplicated(garden_merged, fromLast = TRUE), ]
garden_merged = garden_merged[!duplicated(garden_merged), ]



#creating amenity count table
amenity_count = garden_merged %&gt;%
  pivot_longer(cols = c(open_lawn_or_communal_area, murals, farmers_market, pond, food), names_to = &quot;Amenity&quot;, values_to = &quot;True_False&quot;) %&gt;% 
  filter(True_False == TRUE) %&gt;% 
  group_by(Amenity) %&gt;% 
  count(name = &quot;total_gardens&quot;)


#amenity count by borough
amenity_count_borough = garden_merged %&gt;%
  pivot_longer(cols = c(open_lawn_or_communal_area, murals, farmers_market, pond, food), names_to = &quot;Amenity&quot;, values_to = &quot;True_False&quot;) %&gt;% 
  select(borough, Amenity, True_False) %&gt;% 
  filter(True_False == TRUE) %&gt;% 
  group_by(borough, Amenity) %&gt;%
  summarise(num_amenities = n(), .groups = &quot;drop&quot;) %&gt;% 
  group_by(borough) %&gt;% 
  mutate(total_amenities = sum(num_amenities)) %&gt;% 
    ungroup()
  
table1 = amenity_count_borough %&gt;% select(borough, total_amenities) %&gt;% unique() %&gt;% 
  knitr::kable(col.names = c(&quot;Borough&quot;, &quot;Total Amenities&quot;),
               label = &quot;Total Number of Garden Amenities by Borough&quot;)
  

table1</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">Borough</th>
<th align="right">Total Amenities</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Bronx</td>
<td align="right">144</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">331</td>
</tr>
<tr class="odd">
<td align="left">Manhattan</td>
<td align="right">167</td>
</tr>
<tr class="even">
<td align="left">Queens</td>
<td align="right">43</td>
</tr>
<tr class="odd">
<td align="left">Staten Island</td>
<td align="right">6</td>
</tr>
</tbody>
</table>
<p>Brooklyn leads with the greatest number of garden amenities! Go
Brooklyn!</p>
<div id="looking-at-different-amenities" class="section level2">
<h2>Looking At Different Amenities</h2>
<p>Let’s check out how many gardens have each type of amenity.</p>
<p>Here’s a histogram of the number of gardens with each of the
features: open lawn/communal area, murals, pond, farmer’s market,
food.</p>
<pre class="r"><code>plot1 = amenity_count %&gt;% 
  mutate(Amenity = recode(Amenity,
                          &quot;farmers_market&quot; = &quot;Farmer&#39;s Market&quot;,
                          &quot;food&quot; = &quot;Food&quot;,
                          &quot;murals&quot; = &quot;Murals&quot;,
                          &quot;open_lawn_or_communal_area&quot; = &quot;Open Lawn/Communal Area&quot;,
                          &quot;pond&quot; = &quot;Pond&quot;)) %&gt;% 
  ggplot(aes(x = Amenity, y = total_gardens, fill = Amenity)) +
  geom_col() +
  labs(title = &quot;Number of Gardens by Type&quot;,
       x = &quot;Amenity Type&quot;,
       y = &quot;Total Number of Gardens&quot;) +
  scale_fill_brewer(palette = &quot;PRGn&quot;) +
  theme(panel.background = element_rect(fill = &quot;transparent&quot;)) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

ggplotly(plot1)</code></pre>
<div class="plotly html-widget html-fill-item" id="htmlwidget-fe1bf9b0e231809a1d67" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-fe1bf9b0e231809a1d67">{"x":{"data":[{"orientation":"v","width":0.89999999999999991,"base":0,"x":[1],"y":[24],"text":"Amenity: Farmer's Market<br />total_gardens:  24<br />Amenity: Farmer's Market","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(123,50,148,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Farmer's Market","legendgroup":"Farmer's Market","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.90000000000000013,"base":0,"x":[2],"y":[296],"text":"Amenity: Food<br />total_gardens: 296<br />Amenity: Food","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(194,165,207,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Food","legendgroup":"Food","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.90000000000000036,"base":0,"x":[3],"y":[78],"text":"Amenity: Murals<br />total_gardens:  78<br />Amenity: Murals","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(247,247,247,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Murals","legendgroup":"Murals","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.90000000000000036,"base":0,"x":[4],"y":[268],"text":"Amenity: Open Lawn/Communal Area<br />total_gardens: 268<br />Amenity: Open Lawn/Communal Area","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(166,219,160,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Open Lawn/Communal Area","legendgroup":"Open Lawn/Communal Area","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.90000000000000036,"base":0,"x":[5],"y":[25],"text":"Amenity: Pond<br />total_gardens:  25<br />Amenity: Pond","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,136,55,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Pond","legendgroup":"Pond","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":99.378264189967908,"l":43.105022831050235},"plot_bgcolor":"transparent","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Number of Gardens by Type","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,5.5999999999999996],"tickmode":"array","ticktext":["Farmer's Market","Food","Murals","Open Lawn/Communal Area","Pond"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["Farmer's Market","Food","Murals","Open Lawn/Communal Area","Pond"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-45,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Amenity Type","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-14.800000000000001,310.80000000000001],"tickmode":"array","ticktext":["0","100","200","300"],"tickvals":[0,100,200.00000000000003,300],"categoryorder":"array","categoryarray":["0","100","200","300"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Total Number of Gardens","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Amenity","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"100166eb84ec1":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"100166eb84ec1","visdat":{"100166eb84ec1":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>It seems like food and an open lawn/communal area are the most
popular types of garden amenities. Time to go have a picnic.</p>
</div>
<div id="garden-amenities-distribution-by-borough"
class="section level2">
<h2>Garden Amenities Distribution by Borough</h2>
<p>Have you ever wondered which boroughs have the most garden amenities?
We certainly did! Here is a histogram showing us the count of each
amenity we can find in every borough.</p>
<pre class="r"><code>plot2 = amenity_count_borough %&gt;%
  mutate(Amenity = recode(Amenity,
                          &quot;farmers_market&quot; = &quot;Farmer&#39;s Market&quot;,
                          &quot;food&quot; = &quot;Food&quot;,
                          &quot;murals&quot; = &quot;Murals&quot;,
                          &quot;open_lawn_or_communal_area&quot; = &quot;Open Lawn/Communal Area&quot;,
                          &quot;pond&quot; = &quot;Pond&quot;)) %&gt;% 
  ggplot(aes(x = Amenity, y = num_amenities, fill = borough)) +
  geom_col(position = &quot;dodge&quot;) +
  labs(x = &quot;Number of Amenities&quot;, y = &quot;Type of Amenity&quot;) + 
  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
  scale_fill_brewer(palette = &quot;PRGn&quot;) +
  theme(panel.background = element_rect(fill = &quot;transparent&quot;))


ggplotly(plot2)</code></pre>
<div class="plotly html-widget html-fill-item" id="htmlwidget-e716ab328d3d9567eea3" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-e716ab328d3d9567eea3">{"x":{"data":[{"orientation":"v","width":[0.22500000000000009,0.18000000000000016,0.17999999999999972,0.17999999999999972,0.22499999999999964],"base":[0,0,0,0,0],"x":[0.66250000000000009,1.6400000000000001,2.6400000000000001,3.6400000000000001,4.6624999999999996],"y":[2,62,11,66,3],"text":["Amenity: Farmer's Market<br />num_amenities:   2<br />borough: Bronx","Amenity: Food<br />num_amenities:  62<br />borough: Bronx","Amenity: Murals<br />num_amenities:  11<br />borough: Bronx","Amenity: Open Lawn/Communal Area<br />num_amenities:  66<br />borough: Bronx","Amenity: Pond<br />num_amenities:   3<br />borough: Bronx"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(123,50,148,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Bronx","legendgroup":"Bronx","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.22500000000000009,0.18000000000000016,0.17999999999999972,0.17999999999999972,0.22499999999999964],"base":[0,0,0,0,0],"x":[0.88749999999999996,1.8200000000000001,2.8199999999999998,3.8199999999999998,4.8875000000000002],"y":[17,147,38,121,8],"text":["Amenity: Farmer's Market<br />num_amenities:  17<br />borough: Brooklyn","Amenity: Food<br />num_amenities: 147<br />borough: Brooklyn","Amenity: Murals<br />num_amenities:  38<br />borough: Brooklyn","Amenity: Open Lawn/Communal Area<br />num_amenities: 121<br />borough: Brooklyn","Amenity: Pond<br />num_amenities:   8<br />borough: Brooklyn"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(194,165,207,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Brooklyn","legendgroup":"Brooklyn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.22500000000000009,0.17999999999999994,0.17999999999999972,0.17999999999999972,0.22499999999999964],"base":[0,0,0,0,0],"x":[1.1125,2,3,4,5.1124999999999998],"y":[1,65,24,64,13],"text":["Amenity: Farmer's Market<br />num_amenities:   1<br />borough: Manhattan","Amenity: Food<br />num_amenities:  65<br />borough: Manhattan","Amenity: Murals<br />num_amenities:  24<br />borough: Manhattan","Amenity: Open Lawn/Communal Area<br />num_amenities:  64<br />borough: Manhattan","Amenity: Pond<br />num_amenities:  13<br />borough: Manhattan"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(247,247,247,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Manhattan","legendgroup":"Manhattan","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.22500000000000009,0.17999999999999972,0.17999999999999972,0.17999999999999972,0.22499999999999964],"base":[0,0,0,0,0],"x":[1.3374999999999999,2.1799999999999997,3.1799999999999997,4.1799999999999997,5.3375000000000004],"y":[4,19,4,15,1],"text":["Amenity: Farmer's Market<br />num_amenities:   4<br />borough: Queens","Amenity: Food<br />num_amenities:  19<br />borough: Queens","Amenity: Murals<br />num_amenities:   4<br />borough: Queens","Amenity: Open Lawn/Communal Area<br />num_amenities:  15<br />borough: Queens","Amenity: Pond<br />num_amenities:   1<br />borough: Queens"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(166,219,160,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Queens","legendgroup":"Queens","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.17999999999999972,0.17999999999999972,0.17999999999999972],"base":[0,0,0],"x":[2.3599999999999999,3.3599999999999999,4.3600000000000003],"y":[3,1,2],"text":["Amenity: Food<br />num_amenities:   3<br />borough: Staten Island","Amenity: Murals<br />num_amenities:   1<br />borough: Staten Island","Amenity: Open Lawn/Communal Area<br />num_amenities:   2<br />borough: Staten Island"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,136,55,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Staten Island","legendgroup":"Staten Island","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.228310502283108,"r":7.3059360730593621,"b":99.378264189967908,"l":43.105022831050235},"plot_bgcolor":"transparent","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,5.5999999999999996],"tickmode":"array","ticktext":["Farmer's Market","Food","Murals","Open Lawn/Communal Area","Pond"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["Farmer's Market","Food","Murals","Open Lawn/Communal Area","Pond"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-45,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Number of Amenities","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-7.3500000000000005,154.34999999999999],"tickmode":"array","ticktext":["0","50","100","150"],"tickvals":[0,50,100,150],"categoryorder":"array","categoryarray":["0","50","100","150"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Type of Amenity","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"borough","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"10016692b167e":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"10016692b167e","visdat":{"10016692b167e":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Brooklyn leads in every garden amenity category, except for ponds. If
you want to see a pond, go to Manhattan.</p>
<p><img src="amenitypic1.jpg" style="width:80%"></p>
</div>
<div id="what-does-money-have-to-do-with-it" class="section level2">
<h2>What Does Money Have To Do With It?</h2>
<p>Below is a dot plot of median income in each borough, so we can see
where each borough stands before we go into some regressions.</p>
<pre class="r"><code>#importing and tidying income dataset

income = read_csv(&quot;./censusincome2024.csv&quot;) %&gt;% janitor::clean_names()

income_borough = income[2, ] %&gt;% 
  select(bronx_county_new_york_median_income_dollars_estimate,
            bronx_county_new_york_median_income_dollars_margin_of_error,
         kings_county_new_york_median_income_dollars_estimate,
         kings_county_new_york_median_income_dollars_margin_of_error,
         new_york_county_new_york_median_income_dollars_estimate,
         new_york_county_new_york_median_income_dollars_margin_of_error,
         queens_county_new_york_median_income_dollars_estimate,
         queens_county_new_york_median_income_dollars_margin_of_error,
         richmond_county_new_york_median_income_dollars_estimate,
         richmond_county_new_york_median_income_dollars_margin_of_error) %&gt;% 
  mutate_all(as.character) %&gt;% 
  pivot_longer(cols = everything(), names_to = &quot;column_name&quot;, values_to = &quot;value&quot;) %&gt;% 
  mutate(
    borough = str_extract(column_name, &quot;^[a-z_]+(?=_county)&quot;),
    metric = ifelse(str_detect(column_name, &quot;estimate&quot;), &quot;median_income&quot;, &quot;margin_of_error&quot;)
  ) %&gt;%
  select(-column_name) %&gt;% 
  pivot_wider(
    names_from = metric,
    values_from = value
  ) %&gt;% 
  mutate(borough = recode(borough, bronx = &#39;Bronx&#39;, kings = &#39;Brooklyn&#39;, new_york =  &#39;Manhattan&#39;, queens = &#39;Queens&#39;, richmond = &#39;Staten Island&#39; ))

#converting to numeric
income_borough &lt;- income_borough %&gt;%
  mutate(median_income = as.numeric(gsub(&quot;,&quot;, &quot;&quot;, median_income))) %&gt;% 
  mutate(margin_of_error = as.numeric(gsub(&quot;[±,]&quot;, &quot;&quot;, margin_of_error)))

#add columns for MOE
income_borough = income_borough %&gt;% mutate(
  lower_margin = (median_income-margin_of_error),
  upper_margin = (median_income+margin_of_error)
)


#income dsitribution dot plot with MoE
plot3 = income_borough %&gt;% 
  ggplot(aes(x= borough, y = median_income)) +
  geom_col(fill =&quot;white&quot;, color = &quot;black&quot;) +
  geom_errorbar(aes(ymax = upper_margin, ymin = lower_margin, width = 0.5)) +
  theme_classic()

ggplotly(plot3)</code></pre>
<div class="plotly html-widget html-fill-item" id="htmlwidget-5522c92346d06fb9c605" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-5522c92346d06fb9c605">{"x":{"data":[{"orientation":"v","width":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036],"base":[0,0,0,0,0],"x":[1,2,3,4,5],"y":[46838,76912,101078,81929,95543],"text":["borough: Bronx<br />median_income:  46838","borough: Brooklyn<br />median_income:  76912","borough: Manhattan<br />median_income: 101078","borough: Queens<br />median_income:  81929","borough: Staten Island<br />median_income:  95543"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,255,255,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5],"y":[46838,76912,101078,81929,95543],"text":["borough: Bronx<br />median_income:  46838<br />upper_margin:  48841<br />lower_margin: 44835<br />width: 0.5","borough: Brooklyn<br />median_income:  76912<br />upper_margin:  78742<br />lower_margin: 75082<br />width: 0.5","borough: Manhattan<br />median_income: 101078<br />upper_margin: 103660<br />lower_margin: 98496<br />width: 0.5","borough: Queens<br />median_income:  81929<br />upper_margin:  83771<br />lower_margin: 80087<br />width: 0.5","borough: Staten Island<br />median_income:  95543<br />upper_margin: 101704<br />lower_margin: 89382<br />width: 0.5"],"type":"scatter","mode":"lines","opacity":1,"line":{"color":"transparent"},"error_y":{"array":[2003,1830,2582,1842,6161],"arrayminus":[2003,1830,2582,1842,6161],"type":"data","width":16.153846153846157,"symmetric":false,"color":"rgba(0,0,0,1)"},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.228310502283108,"r":7.3059360730593621,"b":40.182648401826498,"l":60.639269406392714},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,5.5999999999999996],"tickmode":"array","ticktext":["Bronx","Brooklyn","Manhattan","Queens","Staten Island"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["Bronx","Brooklyn","Manhattan","Queens","Staten Island"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176002,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"borough","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-5183,108843],"tickmode":"array","ticktext":["0","25000","50000","75000","100000"],"tickvals":[0,25000,50000,75000,100000],"categoryorder":"array","categoryarray":["0","25000","50000","75000","100000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176002,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"median_income","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"1001640cbed22":{"x":{},"y":{},"type":"bar"},"10016c3d746a":{"x":{},"y":{},"ymax":{},"ymin":{},"width":{}}},"cur_data":"1001640cbed22","visdat":{"1001640cbed22":["function (y) ","x"],"10016c3d746a":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Manhattan has the greatest median income, while Bronx has the least.
This will come in handy when we are analyzing how income is associated
with garden amenities….</p>
</div>
<div id="poisson-analysis" class="section level2">
<h2>Poisson analysis</h2>
<div id="looking-at-total-amenities-per-borough-and-median-income."
class="section level3">
<h3>Looking at total amenities per borough and median income.</h3>
<p>We ran a Poisson regression model to investigate how median borough
income might associate with the total number of amenities available in
each borough. Our odds ratio of 1 shows that, to our surprise, median
income may not have much of an effect of the number of amenities
available in each borough. From an equity standpoint, this could be good
news; lower income may not directly result in fewer garden
amenities.</p>
<pre class="r"><code>#POISSON ANALYSIS
#isolating total amenities per borough
total_borough_amenity = select(amenity_count_borough, borough, total_amenities)
total_borough_amenity = total_borough_amenity[!duplicated(total_borough_amenity), ]

#creating new data frame for regression
poisson_df = left_join(income_borough, total_borough_amenity, by=&quot;borough&quot;) %&gt;% select(borough, median_income, total_amenities)

# Fit the Poisson regression model
poisson_model &lt;- glm(total_amenities ~ median_income, 
                     family = poisson(link = &quot;log&quot;), 
                     data = poisson_df)

table2 = poisson_model %&gt;% broom::tidy() |&gt; 
  mutate(OR = exp(estimate)) |&gt;
  select(term, log_OR = estimate, OR, p.value) |&gt; 
  knitr::kable()

table2</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">log_OR</th>
<th align="right">OR</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">5.6508878</td>
<td align="right">284.5439597</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">median_income</td>
<td align="right">-0.0000092</td>
<td align="right">0.9999908</td>
<td align="right">0.0000013</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="multinomial-regression" class="section level2">
<h2>Multinomial Regression</h2>
<p>In our multinomial regression below, we evaluated median income,
borough and garden status (an active GreenThumb garden or not a
GreenThumb garden; as a reminder, GreenThumb is a garden maintenance
program).</p>
<p>We found that being in the GreenThumb program significantly decreases
the odds of having garden ponds compared to those not in the program.
Gardens in Manhattan and Brooklyn have higher odds of having ponds
compared to other boroughs, while median income does not significantly
influence the presence of garden ponds. Gardens in Queens have slightly
lower odds of having garden ponds, but this difference is not
statistically significant.</p>
<pre><code>## # weights:  7 (6 variable)
## initial  value 241.215219 
## iter  10 value 86.506329
## final  value 86.085779 
## converged</code></pre>
<pre class="r"><code>table3</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">log_OR</th>
<th align="right">OR</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-1.5406990</td>
<td align="right">0.2142313</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">statusActive</td>
<td align="right">-1.5406990</td>
<td align="right">0.2142313</td>
<td align="right">0.0000000</td>
</tr>
<tr class="odd">
<td align="left">median_income</td>
<td align="right">-0.0000002</td>
<td align="right">0.9999998</td>
<td align="right">0.9305107</td>
</tr>
<tr class="even">
<td align="left">boroughBrooklyn</td>
<td align="right">0.1463642</td>
<td align="right">1.1576177</td>
<td align="right">0.0000000</td>
</tr>
<tr class="odd">
<td align="left">boroughManhattan</td>
<td align="right">1.2732599</td>
<td align="right">3.5724794</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">boroughQueens</td>
<td align="right">-0.0370497</td>
<td align="right">0.9636282</td>
<td align="right">0.0000000</td>
</tr>
</tbody>
</table>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
